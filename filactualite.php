
<!DOCTYPE html>
<html>
<head>
    <title>fil d'actualite</title>
    <meta charset="utf-8">
    <link rel="stylesheet" type="text/css" href="">
    <link href="https://maxcdn.bootstrapcdn.com/font-awesome/4.3.0/css/font-awesome.min.css" rel="stylesheet">
</head>
<body>
    <div class="baniere">
        <div class="navbar">
            <img src="image/pastef.jpeg"  class="logo">

        </div>
    </div>
    <div class="panel panel-body">

        <div class="timeline">


            <div class="timeline-header">
                <div class="timeline-header-title bg-success"></div>
            </div>

            <div class="timeline-entry">
                <div class="timeline-stat">
                    <div class="timeline-icon"><img src="image/sonko1.jpeg">
                    </div>
                    <div class="timeline-time">il y'a 30mn</div>
                </div>
                <div class="timeline-label">
                    <p class="mar-no pad-btm"><a href="#" class="btn-link text-semibold">Ousmane SONKO</a> À chaque sortie du Président Macky Sall, nous mesurons davantage à quel point le choix de 2012 a été une erreur, tant le discours et l’argumentaire de l’homme sont superficiels et manquent de sérieux ». Tels ont été les propos d’Ousmane Sonko de Pastef/Les Patriotes qui réagissait...à la sortie du Président Macky Sall sur la polémique autour de la gestion du pétrole et du gaz au Sénégal. Pour le député candidat à la présidentielle, la sortie de Macky Sall ne relève pas le niveau du débat autour des questions-là surtout « lorsqu’un citoyen produit un ouvrage de 255 pages pour révéler tous les manquements et magouilles dans la gestion de nos ressources pétrolières et gazières ». Et non plus « lorsqu’il situe et démontre la responsabilité du Président de la République qui a sciemment violé la Constitution et trahi son serment...» !</p>
                    <div class="img-holder">
                        <center><img src="image/Ousmane-Sonko.jpg" width="500px" ></center>
                    </div>
                    <div class="activity_list_footer">
                        <a href="connexion.php"> <i class="fa fa-thumbs-up"></i> 123 </a>
                        <a href="connexion.php"> <i class="fa fa-comments"></i> 23 </a>

                    </div>

                </div>
            </div>
            <div class="timeline-entry">
                <div class="timeline-stat">
                    <div class="timeline-icon"><img src="image/ngagne.jpeg">
                    </div>
                    <div class="timeline-time"> 1 mn</div>
                </div>
                <div class="timeline-label">
                    <p class="mar-no pad-btm"><a href="#" class="btn-link text-semibold">Maitre Ngagne demba Touré</a> Un arrêté portant affectation des Greffiers a été signé le vendredi 16 juin 2023 par le Garde des Sceaux, ministre de la Justice, Ismaila Madior Fall. Un vaste mouvement de 60 Greffiers a été noté dont celui du responsable de Pastef Ngagne Demba Touré qui officiait au Tribunal de Grande Instance de Dakar et qui a été affecté au Tribunal de Grande Instance de Matam .
                    </p>
                    <div class="img-holder">
                        <center><img src="image/demba.jpg" width="500px"></center>
                    </div>
                    <div class="activity_list_footer">
                        <a href="connexion.php"> <i class="fa fa-thumbs-up"></i> 12 </a>
                        <a href="connexion.php"> <i class="fa fa-comments"></i> 4 </a>

                    </div>
                </div>
            </div>
            <div class="timeline-entry">
                <div class="timeline-stat">
                    <div class="timeline-icon"><img src="image/souley.jpeg">
                    </div>
                    <div class="timeline-time">1H</div>
                </div>
                <div class="timeline-label">
                    <p class="mar-no pad-btm"><a href="#" class="btn-link text-semibold">Birame Souley DIOP</a> Le responsable politique de Pastef a été déféré au parquet pour «offense au chef de l’Etat, diffamation contre un chef d’Etat étranger de nature à saper les relations diplomatiques, discrédit sur une institution mais aussi acte et manœuvres de nature à inciter les citoyens à enfreindre les lois».

                    Lors de son audition, le président du groupe parlementaire de la coalition Yewwi Askan Wi a évoqué une «erreur de communication» puis exprimé ses regrets avant de présenter ses excuses.</p>
                    <div class="img-holder">
                        <center><img src="image/birame.jpeg" width="200px"></center>
                        <div class="activity_list_footer">
                            <a href="connexion.php"> <i class="fa fa-thumbs-up"></i> 34k </a>
                            <a href="connexion.php"> <i class="fa fa-comments"></i> 23k </a>
                            
                        </div>
                    </div>
                </div>
                   <!--  <div class="activity_list_footer">
                            <a href="login.php"> <i class="fa fa-thumbs-up"></i> 34k </a>
                            <a href="login.php"> <i class="fa fa-comments"></i> 23k </a>
                            
                        </div> -->
                    </div>
                    <div class="timeline-entry">
                        <div class="timeline-stat">
                            <div class="timeline-icon"><img src="image/diomaye.jpeg">
                            </div>
                            <div class="timeline-time">2H</div>
                        </div>
                        <div class="timeline-label">
                            <p class="mar-no pad-btm"><a href="#" class="btn-link text-semibold">Bassirou Diomaye FAYE</a> Bassirou Diomaye Faye, le secrétaire général et n°2 du parti, a été interpelé et placé en garde à vue vendredi soir 14 avril pour diffusion de fausse nouvelle, outrage à magistrat et diffamation envers un corps constitué, à la suite de la publication d’un post sur les réseaux sociaux où il critique le comportement de certains magistrats </p>
                            <div class="img-holder">
                                <center><img src="image/bassirou.jpeg" width="500px"></center>
                            </div>
                            <div class="activity_list_footer">
                                <a href="connexion.php"> <i class="fa fa-thumbs-up"></i> 2k </a>
                                <a href="connexion.php"> <i class="fa fa-comments"></i> 100 </a>

                            </div>
                        </div>
                    </div>
                    <div class="timeline-entry">
                        <div class="timeline-stat">
                            <div class="timeline-icon"><img src="image/yewwi.jpg">
                            </div>
                            <div class="timeline-time">avant-hier</div>
                        </div>


                        <div class="timeline-label">
                            <p class="mar-no pad-btm"><a href="#" class="btn-link text-semibold">Yewwi Askan Wi</a>  <br>La coalition de l’opposition Yewwi Askan Wi (Yaw) vient d’annoncer un « giga meeting » à Dakar. Cette mobilisation pour dénoncer la « mal » gouvernance de Macky Sall est prévue le 14 mars prochain</p>
                            <div class="img-holder">
                                <center><img src="image/giga.jpg" width="500px"></center>
                            </div>
                            <div class="activity_list_footer">
                                <a href="connexion.php"> <i class="fa fa-thumbs-up"></i> 565k </a>
                                <a href="connexion.php"> <i class="fa fa-comments"></i> 150 </a>
                            </div>
                        </div>
                    </div>


                </div>
                <div class="timeline-entry">
                    <div class="timeline-stat">
                        <div class="timeline-icon"><img src="image/pastef.jpeg">
                        </div>
                        <div class="timeline-time">avant-hier</div>
                    </div>
                    <div class="timeline-label">
                        <p class="mar-no pad-btm"><a href="#" class="btn-link text-semibold">Pastef Les patriotes</a>  
                        </p>
                        <blockquote class="bq-sm bq-open">Suite au verdict rendu par le tribunal criminel qui condamne l’opposant Ousmane Sonko à deux ans d’emprisonnement ferme pour corruption de la jeunesse, le parti Patriotes africains du Sénégal pour le travail, l’éthique et la fraternité (PASTEF) s’insurge et invite les sénégalais "à descendre dans la rue pour faire face aux dérives dictatoriales et sanguinaires du régime de Macky Sall jusqu’à son départ de la tête de l’Etat.".</blockquote>
                        <div class="activity_list_footer">
                            <a href="connexion.php"> <i class="fa fa-thumbs-up"></i> 78k </a>
                            <a href="connexion.php"> <i class="fa fa-comments"></i> 6k</a>

                        </div>
                    </div>

                </div>

            </div>
        </div>

    </div>
</div>
</div>
<style type="text/css">
    body{
        margin-top:30px;
        background: whitesmoke;
    }
    .baniere
    {
        width: 100%;
        height: 35vh;
        background-size: cover;
        background-position: center;
    }
    .navbar
    {
        width: 85%;
        margin: auto;
        padding: 35px 0;
        display: flex;
        align-items: center;
        justify-content: space-between;
    }
    .logo
    {
        width: 200px;
        cursor: pointer;
    }
    .navbar ul li
    {
        list-style: none;
        display: inline-block;
        margin: 0 20px;
        position: relative;
    }
    .navbar ul li a
    {
        text-decoration: none;
        color: black;
        text-transform: uppercase;
        float:  right;  
    }
    .navbar ul li::after
    {
        content: ' ';
        height: 3px;
        width: 0%;
        background: rgb(83,54,189);
        position: absolute;
        left: 0;
        bottom: -10px;
        transition: 0.5s;
    }
    li h1{
        font-size: 35px;
        color: white;
        position: relative;
    }
    .navbar ul li:hover::after
    {
        width: 100%;
    }
    .img-sm {
        width: 46px;
        height: 46px;
    }

    .img-xs {
        width: 32px;
        height: 32px;
    }

    .img-holder img {
        max-width: 100%;
        border-radius: 0;
    }

    .panel {
        box-shadow: 0 2px 0 green;
        border-radius: 0;
        border: 0;
        margin-bottom: 15px;
        background: green;
    }

    .panel .panel-footer, .panel>:last-child {
        border-bottom-left-radius: 0;
        border-bottom-right-radius: 0;
    }

    .panel .panel-heading, .panel>:first-child {
        border-top-left-radius: 0;
        border-top-right-radius: 0;
    }

    .panel-body {
        padding: 25px 20px;
    }


    .timeline {
        position: relative;
        padding-bottom: 40px;
        background-color: green;
        color: #5f5f5f
    }

    .timeline:before,
    .timeline:after {
        background-color: green;
        bottom: 20px;
        content: "";
        display: block;
        position: absolute
    }

    .timeline:before {
        left: 49px;
        top: 20px;
        width: 2px
    }

    .timeline:after {
        left: 47px;
        width: 6px;
        height: 6px;
        border-radius: 50%
    }

    .timeline-header {
        border-radius: 0;
        clear: both;
        margin-bottom: 50px;
        margin-top: 50px;
        position: relative
    }

    .timeline-header .timeline-header-title {
        display: inline-block;
        text-align: center;
        padding: 7px 15px;
        min-width: 100px
    }

    .timeline .timeline-header:first-child {
        margin-bottom: 30px;
        margin-top: 15px
    }

    .timeline-stat {
        width: 100px;
        float: left;
        text-align: center;
        padding-bottom: 15px
    }

    .timeline-entry {
        margin-bottom: 50px;
        margin-top: 5px;
        position: relative;
        clear: both
    }

    .timeline-entry-inner {
        position: relative
    }

    .timeline-time {
        display: inline-block;
        padding: 5px 3px 7px;
        margin-top: 3px;
        background-color: #ebeef0;
        color: #929292;
        font-size: .85em;
        max-width: 70px
    }

    .timeline-icon {
        border-radius: 50%;
        box-shadow: 0 0 0 7px #ebeef0;
        display: block;
        margin: 0 auto;
        height: 46px;
        line-height: 46px;
        text-align: center;
        width: 46px
    }

    .timeline-icon img {
        width: 46px;
        height: 46px;
        border-radius: 50%;
        vertical-align: top
    }

    .timeline-icon:empty {
        height: 10px;
        width: 10px;
        margin-top: 20px;
        background-color: #a4b4c7
    }

    .timeline-label {
        background-color: #fff;
        border-radius: 0;
        margin-left: 90px;
        padding: 10px;
        position: relative;
        min-height: 50px;
        border: 1px solid #e9e9e9;
        -webkit-box-shadow: 0 2px 2px 0 rgba(0,0,0,0.2),0 6px 10px 0 rgba(0,0,0,0.3);
        box-shadow: 0 2px 2px 0 rgba(0,0,0,0.2),0 6px 10px 0 rgba(0,0,0,0.3);
    }

    .timeline-label:before,
    .timeline-label:after {
        content: "";
        display: block;
        position: absolute;
        width: 0;
        height: 0;
        left: 0;
        top: 0
    }

    .timeline-label:before {
        border-top: 10px solid transparent;
        border-bottom: 10px solid transparent;
        border-right: 10px solid #e6e6e6;
        margin: 15px 0 0 -10px;
    }

    .timeline-label:after {
        border-top: 9px solid transparent;
        border-bottom: 9px solid transparent;
        border-right: 9px solid #fff;
        margin: 15px 0 0 -8px;
    }

    .panel .timeline,
    .panel .timeline-time {
        background-color: #fff;
    }

    .panel .timeline-icon {
        box-shadow: 0 0 0 7px #fff;
    }

    .panel .timeline-label {
        box-shadow: none;
        background-color: #f7f7f7;
        border: 1px solid #e3e3e3
    }

    .panel .timeline-label:before {
        border-right-color: #e3e3e3
    }

    .panel .timeline-label:after {
        border-right-color: #f7f7f7
    }

              /*  @media (min-width:768px) {
                    .two-column.timeline {
                        text-align: center
                    }
                    .two-column.timeline:before {
                        left: 50%
                    }
                    .two-column.timeline:after {
                        left: 50%;
                        margin-left: -2px
                    }
                    .two-column.timeline .timeline-entry {
                        width: 50%;
                        text-align: left
                    }
                    .two-column.timeline .timeline-stat {
                        margin-left: -50px
                    }
                    .two-column.timeline .timeline-entry:nth-child(odd) {
                        float: right
                    }
                    .two-column.timeline .timeline-entry:nth-child(odd) .timeline-label {
                        margin-left: 40px
                    }
                    .two-column.timeline .timeline-header {
                        text-align: center
                    }
                    .two-column.timeline .timeline-entry:nth-child(even) {
                        float: left
                    }
                    .two-column.timeline .timeline-entry:nth-child(even) .timeline-stat {
                        left: 100%;
                        position: relative;
                        margin-left: -50px
                    }
                    .two-column.timeline .timeline-entry:nth-child(even) .timeline-label {
                        left: -90px;
                        margin-right: -40px
                    }
                    .two-column.timeline .timeline-entry:nth-child(even) .timeline-label:before,
                    .two-column.timeline .timeline-entry:nth-child(even) .timeline-label:after {
                        left: auto;
                        right: 0;
                        border-right: 0 solid transparent
                    }
                    .two-column.timeline .timeline-entry:nth-child(even) .timeline-label:before {
                        border-top: 10px solid transparent;
                        border-bottom: 10px solid transparent;
                        border-left: 10px solid #e6e6e6;
                        margin: 15px -10px 0 0
                    }
                    .two-column.timeline .timeline-entry:nth-child(even) .timeline-label:after {
                        border-top: 9px solid transparent;
                        border-bottom: 9px solid transparent;
                        border-left: 9px solid #fff;
                        margin: 15px -8px 0 0
                    }
                }
*/
               /* .bg-dark, .bg-dark a {
                    color: #fff;
                }
                .bg-dark {
                    background-color: #33373a;
                }

                .mar-top {
                    margin-top: 15px;
                }*/
            </style>
        </body>
        </html>



        <?php include 'bd.php'; ?>
        <?php
// Vérifier si l'utilisateur est connecté
        session_start();

        if (!isset($_SESSION['username'])) {
    // Rediriger vers la page de connexion s'il n'est pas connecté
            header("Location: connexion.php");
            exit();
        }

// Afficher les informations personnelles de l'utilisateur
        echo "<h1>Mon compte</h1>";
        echo "<p>Nom d'utilisateur : " . $_SESSION['username'] . "</p>";

// Afficher les publications de l'utilisateur
        echo "<h2>Mes publications</h2>";

// Requête pour récupérer les publications de l'utilisateur
        $sql = "SELECT * FROM publications WHERE auteur = (SELECT id FROM utilisateurs WHERE nom_utilisateur = '".$_SESSION['username']."')";
            $result = mysqli_query($conn, $sql);

// Vérifier s'il y a des publications
            if (mysqli_num_rows($result) > 0) {
    // Parcourir les résultats de la requête
                while ($row = mysqli_fetch_assoc($result)) {
        // Afficher les informations de la publication
                    echo '<div class="publication">';
                    echo '<h3>Auteur : ' . $_SESSION['username'] . '</h3>';
                    echo '<p>Texte : ' . $row['texte'] . '</p>';
        // Afficher les médias s'il y en a
                    if (!empty($row['medias'])) {
                        echo '<img src="' . $row['medias'] . '" alt="Médias">';
                    }
                    echo '</div>';
                }
            } else {
                echo 'Aucune publication à afficher.';
            }



            ?>


            <?php


// Afficher le formulaire de publication
            echo '<h2>Créer une publication</h2>';
            echo '<form action="ajouter_publication.php" method="POST" enctype="multipart/form-data">';
            echo '<label for="texte">Texte :</label>';
            echo '<textarea name="texte" id="texte" required></textarea><br>';
            echo '<label for="medias">Médias :</label>';
            echo '<input type="file" name="medias" id="medias"><br>';
            echo '<input type="submit" value="Publier">';
            echo '</form>';


            ?>

            <?php


// Afficher les publications existantes
            echo '<h2>Publications</h2>';

// Requête pour récupérer les publications de tous les utilisateurs, triées par ordre décroissant de date
            $sql = "SELECT * FROM Publications ORDER BY date_creation DESC";
            $result = mysqli_query($conn, $sql);

// Vérifier s'il y a des publications
            if (mysqli_num_rows($result) > 0) {
    // Parcourir les résultats de la requête
                while ($row = mysqli_fetch_assoc($result)) {
        // Afficher les informations de la publication
                    echo '<div class="publication">';
                    echo '<h3>Auteur : ' . $row['auteur'] . '</h3>';
                    echo '<p>Texte : ' . $row['texte'] . '</p>';
        // Afficher les médias s'il y en a
                    if (!empty($row['medias'])) {
                        echo '<img src="' . $row['medias'] . '" alt="Médias">';
                    }

        // Afficher le nombre de likes et de commentaires
                    echo '<p>' . countLikes($row['id']) . ' Likes</p>';
                    echo '<p>' . countComments($row['id']) . ' Commentaires</p>';

        // Afficher le bouton "J'aime" si l'utilisateur est connecté
                    if (isset($_SESSION['username'])) {
                        echo '<form action="aimer_publication.php" method="POST">';
                        echo '<input type="hidden" name="publication_id" value="' . $row['id'] . '">';
                        echo '<input type="submit" value="J\'aime">';
                        echo '</form>';
                    }

        // Afficher les commentaires de la publication
                    echo '<h4>Commentaires</h4>';
                    $comments = getComments($row['id']);
                    if (!empty($comments)) {
                        foreach ($comments as $comment) {
                            echo '<p><strong>' . $comment['auteur'] . ':</strong> ' . $comment['contenu'] . '</p>';
                        }
                    } else {
                        echo '<p>Aucun commentaire.</p>';
                    }

        // Formulaire pour ajouter un commentaire
                    if (isset($_SESSION['username'])) {
                        echo '<form action="ajouter_commentaire.php" method="POST">';
                        echo '<input type="hidden" name="publication_id" value="' . $row['id'] . '">';
                        echo '<input type="text" name="contenu" placeholder="Ajouter un commentaire" required>';
                        echo '<input type="submit" value="Commenter">';
                        echo '</form>';
                    }

                    echo '</div>';
                }
            } else {
                echo 'Aucune publication à afficher.';
            }

            ?>


            <?php


// Fonction pour compter les likes d'une publication
            function countLikes($publicationId) {
    // Requête pour compter les likes de la publication
                $sql = "SELECT COUNT(*) as count FROM Likes WHERE publication_id = '$publicationId'";
                $result = mysqli_query($conn, $sql);
                $row = mysqli_fetch_assoc($result);
                return $row['count'];
            }


            ?>


            <?php


// Fonction pour compter les commentaires d'une publication
            function countComments($publicationId) {
    // Requête pour compter les commentaires de la publication
                $sql = "SELECT COUNT(*) as count FROM Commentaires WHERE publication_id = '$publicationId'";
                $result = mysqli_query($conn, $sql);
                $row = mysqli_fetch_assoc($result);
                return $row['count'];
            }


            ?>
            <!-- mon_compte.php -->

            <?php
// ...

// Afficher les publications existantes
            echo '<h2>Publications</h2>';

// Requête pour récupérer les publications de tous les utilisateurs, triées par ordre décroissant de date
            $sql = "SELECT * FROM Publications ORDER BY date_creation DESC";
            $result = mysqli_query($conn, $sql);

// Vérifier s'il y a des publications
            if (mysqli_num_rows($result) > 0) {
    // Parcourir les résultats de la requête
                while ($row = mysqli_fetch_assoc($result)) {
        // Afficher les informations de la publication
                    echo '<div class="publication">';
                    echo '<h3>Auteur : <a href="profil_utilisateur.php?utilisateur_id=' . $row['auteur_id'] . '">' . $row['auteur'] . '</a></h3>';
                    echo '<p>Texte : ' . $row['texte'] . '</p>';
        // Afficher les médias s'il y en a
                    if (!empty($row['medias'])) {
                        echo '<img src="' . $row['medias'] . '" alt="Médias">';
                    }
        // Afficher les likes et les commentaires
        // ...
                    echo '</div>';
                }
            } else {
                echo 'Aucune publication à afficher.';
            }

// ...
            ?>



